import click\nimport pandas as pd\nfrom scripts.analyzer import StockAnalyzer\nfrom utils.logger import setup_logging\n\nlogger = setup_logging()\n\n@click.command()\n@click.option('--max-stocks', default=None, type=int, help='Maximum number of stocks to analyze.')\ndef analyze_cached_stocks(max_stocks):\n    \"\"\"Analyze stocks using only cached data.\"\"\"\n    analyzer = StockAnalyzer()\n    all_symbols = analyzer.get_all_symbols()\n    \n    if max_stocks:\n        all_symbols = dict(list(all_symbols.items())[:max_stocks])\n        \n    for symbol in all_symbols.keys():\n        try:\n            # Get cached data\n            cached_data = pd.read_csv(f'cache/{symbol}.csv', index_col='Date', parse_dates=True)\n            \n            if not cached_data.empty:\n                # Run analysis on cached data\n                analysis_result = analyzer.analyze_stock(symbol, cached_data)\n                logger.info(f\"Analyzed {symbol} from cache\")\n        except FileNotFoundError:\n            logger.warning(f\"No cache found for {symbol}\")\n        except Exception as e:\n            logger.error(f\"Error analyzing {symbol} from cache: {e}\")\n\nif __name__ == '__main__':\n    analyze_cached_stocks()\n
